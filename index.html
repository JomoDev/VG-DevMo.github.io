<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Painter demo</title>
  <style type="text/css">
    canvas#gamecanvas {
      margin: 0px;
    }

    body {
      margin: 0px;
      background-color: lightblue;
    }
  </style>
  <script type="text/javascript">
    var r = 0,
      g = 0,
      b = 0,
      a = 255;
    var mouseIsDown = false;
    var x = 0,
      y = 0;

    window.onload = function() {
      var element = document.getElementById('gamecanvas');
      // unnötiges setzen des Cursors -> kann man auch weglassen, is aber cool
      element.style.cursor = "crosshair";

      var context = element.getContext('2d'),
        imgData;
      context.fillStyle = 'lightgray';
      context.fillRect(0, 0, element.width, element.height);
      imgData = context.getImageData(0, 0, element.width, element.height);
      element.onmousemove = function(e) {
        if (mouseIsDown) {
          x = e.pageX || event.clientX + document.body.scrollLeft;
          y = e.pageY || event.clientY + document.body.scrollTop;
          createImage();
        }
      }

      element.onclick = function(e) {
        mouseIsDown = !mouseIsDown;
      }

      function createImage() {
        imgData.data[4 * (y * imgData.width + x)] = r; // Rot
        imgData.data[4 * (y * imgData.width + x) + 1] = g; // Grün
        imgData.data[4 * (y * imgData.width + x) + 2] = b; // Blau
        imgData.data[4 * (y * imgData.width + x) + 3] = a; // Alpha
        context.putImageData(imgData, 0, 0);
      }

      function focusLost() {
        mouseIsDown = false;
      }
    }
  </script>
</head>

<body>
  <div>
    <canvas id="gamecanvas"></canvas>
  </div>
</body>

</html>
